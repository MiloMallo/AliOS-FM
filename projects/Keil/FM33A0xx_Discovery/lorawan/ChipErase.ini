
FUNC void ChipEraseSetup (void) {
 
  _WDWORD(0x4000022C, 0x00060020);//配置NVMIF时钟
 
  _WDWORD(0x40000004, 0x00000003); //Debug时，禁止看门狗

  _WDWORD(0x40001014, 0x80000201); //编程器通过SWD配置ERTYPE寄存器为10
  _WDWORD(0x40001018, 0x96969696);//写入擦除密码0x96969696
  _WDWORD(0x40001018, 0x7D7D7D7D);//写入擦除密码0x7D7D7D7D
  _WDWORD(0x00000000, 0x1234ABCD);//擦除启动
  _sleep_(1500);
  _WDWORD(0x40001018, 0x00000000);//清除擦除密码
  printf ("NVMIF FLSIF = %08XH,bit0==1表示擦除成功\n", _RDWORD(0x40001020));
  
}


ChipEraseSetup();                       // Debugger Setup

